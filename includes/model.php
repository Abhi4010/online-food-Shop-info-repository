<?phprequire_once ("constants.php");function redirect_to($location = NULL) {    if ($location != NULL) {        header("Location: {$location}");        exit;    }}function get_all_city(){	$sql="SELECT * FROM city";	return find_by_sql($sql);}function get_city_name($city_id){	$sql="SELECT * FROM city WHERE city_id={$city_id}";		//echo $sql;	$result=find_by_sql($sql);	$row=mysql_fetch_array($result);		return $row['name'];}function get_resturant_by_city($city_id){	$sql="SELECT * FROM resturant WHERE city_id={$city_id}";		//echo $sql;	$result=find_by_sql($sql);		return $result;}function get_resturant_by_id($id){	$sql="SELECT * FROM resturant WHERE resturant_id={$id}";	$result=find_by_sql($sql);		return mysql_fetch_array($result);}function get_all_cuisine($resturant_id){	$sql="SELECT DISTINCT(cuisine_id) FROM food WHERE resturant_id={$resturant_id}";		$result=find_by_sql($sql);		return $result;}function get_cuisine_name($cuisine_id){	$sql="SELECT * FROM cuisine WHERE cuisine_id={$cuisine_id}";		$result=find_by_sql($sql);	$row=mysql_fetch_array($result);		return $row['name'];	}function get_food_cuisine_resturant($cuisine_id, $resturant_id){	$sql="SELECT * FROM food WHERE resturant_id={$resturant_id} AND cuisine_id={$cuisine_id}";		$result=find_by_sql($sql);		return $result;	}function get_food_resturant($resturant_id){	$sql="SELECT * FROM food WHERE resturant_id={$resturant_id}";		$result=find_by_sql($sql);		return $result;	}function get_all_offer($resturant_id){	$sql="SELECT * FROM offers WHERE resturant_id={$resturant_id}";		$result=find_by_sql($sql);		return $result;	}function get_food_offer($id){	$sql="SELECT * FROM offer_food WHERE offer_id={$id}";		$result=find_by_sql($sql);		return $result;	}function get_food_id($id){	$sql="SELECT * FROM food WHERE food_id={$id}";		$result=find_by_sql($sql);		$row=mysql_fetch_array($result);		return $row;}function get_every_cuisine(){	$sql="SELECT * FROM cuisine";		$result=find_by_sql($sql);		return $result;}function get_every_item(){	$sql="SELECT * FROM item";		$result=find_by_sql($sql);		return $result;}function get_suggested_food($cuisine_id,$item_id,$low,$high){	$sql="SELECT * FROM food WHERE ";		if($cuisine_id>0)	{		$sql.=" cuisine_id={$cuisine_id} AND ";	}		if($item_id>0)	{		$sql.=" item_id={$item_id} AND ";	}		$sql.= " price>= {$low} AND price<= {$high} ORDER BY orders DESC";		$result=find_by_sql($sql);		return $result;	}function get_suggested_offer($cuisine_id,$low,$high){	$sql="SELECT * FROM offers WHERE cuisine_id={$cuisine_id} AND price>={$low} AND price<={$high} ORDER BY orders DESC";		$result=find_by_sql($sql);		return $result;}function get_single_offer($offer_id){	$sql="SELECT * FROM offers WHERE offer_id={$offer_id}";		$result=find_by_sql($sql);		$row=mysql_fetch_array($result);		return $row;}function insert_item($item){	$sql=" INSERT INTO item (name) VALUES ('{$item}')";		//echo $sql;		find_by_sql($sql);		$sql="SELECT * FROM item WHERE name='{$item}'";		$result=find_by_sql($sql);		$row=mysql_fetch_array($result);		return $row['item_id'];}function insert_cuisine($cuisine){	$sql=" INSERT INTO cuisine (name) VALUES ('{$cuisine}')";		//echo $sql;		find_by_sql($sql);		$sql="SELECT * FROM cuisine WHERE name='{$cuisine}'";		$result=find_by_sql($sql);		$row=mysql_fetch_array($result);		return $row['cuisine_id'];}function insert_food($id,$name,$item,$cuisine,$orders,$amount,$price,$info){	$sql=" INSERT INTO food (resturant_id,name,item_id,cuisine_id,orders,amount,price,info) VALUES ";	$sql.=" ( {$id}   , '{$name}' , {$item}  , {$cuisine}  , {$orders}   , '{$amount}'   , {$price} , '{$info}'  ) " ;		//echo $sql;		find_by_sql($sql);}function insert_offer($id,$name,$cuisine,$price,$orders,$discount,$info){	if($discount==null) $discount=0;	$sql=" INSERT INTO offers (resturant_id,offer_name,cuisine_id,price,orders,discount,info) VALUES ";	$sql.=" ( {$id}   , '{$name}' ,  {$cuisine}  ,{$price} , {$orders}   , {$discount}   ,  '{$info}'  ) " ;		//echo $sql;		find_by_sql($sql);		$sql="SELECT MAX(offer_id) FROM offers";		$result=find_by_sql($sql);		$row=mysql_fetch_array($result);		return $row['MAX(offer_id)'];}function insert_offer_food($offer_id,$food_id,$amount){	$sql=" INSERT INTO offer_food (offer_id,food_id,amount) VALUES ";	$sql.=" ( {$offer_id}   ,  {$food_id}  ,  '{$amount}'  ) " ;		//echo $sql;		find_by_sql($sql);}function find_by_sql($sql="") {  global $db;    if(!$db)	{			$db = mysql_connect(DB_SERVER,DB_USER, DB_PASSWORD) or die('‘Unable to connect. Check your connection parameters.');		mysql_select_db(DB_NAME, $db) or die(mysql_error($db));	}    $result_set =  mysql_query($sql, $db) or die(mysql_error($db));		return $result_set;	  }  //by Ashikee Abhi  function get_resturantmap_by_id($id){	$sql="SELECT * FROM map WHERE resturant_id={$id}";	$result=find_by_sql($sql);	return mysql_fetch_array($result);}function get_ratingavg_by_id($id){	$sql="SELECT avg(rating) FROM rating WHERE resturant_id={$id}";	$result=find_by_sql($sql);	return mysql_fetch_array($result);}function get_ratingcount_by_id($id, $rating){	$sql="SELECT count(rating) FROM rating WHERE resturant_id={$id} AND rating={$rating}";	$result=find_by_sql($sql);	return mysql_fetch_array($result);}function get_ratingtotal($id){	$sql="SELECT count(rating) FROM rating WHERE resturant_id={$id}" ;	$result=find_by_sql($sql);	return mysql_fetch_array($result);}function get_image_by_id($resturant_id){	$sql="SELECT image FROM image WHERE resturant_id={$resturant_id}";		$result=find_by_sql($sql);		return $result;	}?>